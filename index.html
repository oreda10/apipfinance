<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Finance Tracker</title>
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#32E612">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Smart Finance">
    <meta name="description" content="Aplikasi keuangan pintar untuk mengelola pemasukan dan pengeluaran Anda">
    
    <!-- Favicon dan Icons -->
    <link rel="icon" type="image/png" sizes="192x192" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkyIiBoZWlnaHQ9IjE5MiIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSIjMzJFNjEyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik0yMSwxOFYxOUEyLDIgMCAwLDEgMTksMjFINUM0LjM2LDIxIDMsMjAuNjQgMywyMFY1QTIsIDIgMCAwLDEgNSwzSDE5QTIsIDIgMCAwLDEgMjEsNVY2SDIwQTIsIDIgMCAwLDAgMTgsOFYxNkEyLDIgMCAwLDAgMjAsMThNMjAsOFYxNkgyMlY4SDIwWiIvPjwvc3ZnPg==">
    <link rel="apple-touch-icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgwIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSIjMzJFNjEyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik0yMSwxOFYxOUEyLDIgMCAwLDEgMTksMjFINUM0LjM2LDIxIDMsMjAuNjQgMywyMFY1QTIsIDIgMCAwLDEgNSwzSDE5QTIsIDIgMCAwLDEgMjEsNVY2SDIwQTIsIDIgMCAwLDAgMTgsOFYxNkEyLDIgMCAwLDAgMjAsMThNMjAsOFYxNkgyMlY4SDIwWiIvPjwvc3ZnPg==">
    
    <!-- Firebase Scripts -->
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-storage-compat.js"></script>
    
    <!-- CSS -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-spinner"></div>
        <div class="loading-text" id="loadingText">Memuat aplikasi...</div>
    </div>

    <!-- Login Screen -->
    <div class="login-screen" id="loginScreen">
        <div class="login-container">
            <div class="login-logo">
                <div class="login-logo-icon">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="#0A0A0A">
                        <path d="M21,18V19A2,2 0 0,1 19,21H5C3.89,21 3,20.1 3,19V5A2,2 0 0,1 5,3H19A2,2 0 0,1 21,5V6H20A2,2 0 0,0 18,8V16A2,2 0 0,0 20,18M20,8V16H22V8H20Z"/>
                    </svg>
                </div>
                <div class="login-title">Smart Finance</div>
                <div class="login-subtitle">Masuk ke akun Anda untuk memulai</div>
            </div>
            
            <div class="login-form">
                <div class="input-group">
                    <input type="email" class="login-input" id="loginEmail" placeholder="Email" required>
                </div>
                <div class="input-group">
                    <input type="password" class="login-input" id="loginPassword" placeholder="Password" required>
                </div>
                <div class="remember-section">
                    <div class="remember-checkbox" id="rememberCheckbox" onclick="toggleRemember()"></div>
                    <label for="rememberCheckbox">Ingat saya</label>
                </div>
                
                <button class="btn-login" onclick="loginWithCredentials()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M10,17V14H3V10H10V7L15,12L10,17M10,2H19A2,2 0 0,1 21,4V20A2,2 0 0,1 19,22H10A2,2 0 0,1 8,20V18H10V20H19V4H10V6H8V4A2,2 0 0,1 10,2Z"/>
                    </svg>
                    Masuk ke Akun
                </button>
            </div>
        </div>
    </div>

    <!-- Sync Status -->
    <div class="sync-status" id="syncStatus">
        <div class="sync-dot" id="syncDot"></div>
        <span id="syncText">Offline</span>
    </div>

    <div class="app">
        <!-- Header -->
        <header class="header" id="mainHeader">
            <!-- User Info -->
            <div class="user-info" id="userInfo" onclick="showUserInfo()">
                <div class="user-avatar" id="userAvatar">U</div>
                <span id="userStatus">Connecting...</span>
            </div>

            <div class="wallet-info">
                <div class="wallet-icon">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="#0A0A0A">
                        <path d="M21,18V19A2,2 0 0,1 19,21H5C3.89,21 3,20.1 3,19V5A2,2 0 0,1 5,3H19A2,2 0 0,1 21,5V6H20A2,2 0 0,0 18,8V16A2,2 0 0,0 20,18M20,8V16H22V8H20Z"/>
                    </svg>
                </div>
                <div class="wallet-name">Smart Wallet</div>
            </div>
            
            <!-- Balance Card - Only show on dashboard -->
            <div class="balance-card" id="balanceCard">
                <div class="balance-header">
                    <div class="balance-label">Saldo Keseluruhan</div>
                    <button class="eye-toggle" onclick="toggleBalanceVisibility()">
                        <svg id="eyeIcon" width="18" height="18" viewBox="0 0 24 24" fill="rgba(0,0,0,0.7)">
                            <path d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z"/>
                        </svg>
                    </button>
                </div>
                
                <div class="balance-section">
                    <div class="balance-info">
                        <h1 id="totalBalance">Rp 0</h1>
                        <div class="balance-change" id="balanceChange">Total dari semua transaksi</div>
                    </div>
                    <div class="balance-chart">
                        <div id="balanceTrend" class="balance-trend"></div>
                    </div>
                </div>
            </div>

            <!-- Action Buttons - Only show on dashboard -->
            <div class="action-buttons" id="actionButtons">
                <button class="action-btn expense" onclick="showAddTransaction('expense')">
                    <div class="action-icon">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M17,14L12,9L7,14H17Z"/>
                        </svg>
                    </div>
                    <div class="action-text">Pengeluaran</div>
                </button>
                <button class="action-btn income" onclick="showAddTransaction('income')">
                    <div class="action-icon">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M7,10L12,15L17,10H7Z"/>
                        </svg>
                    </div>
                    <div class="action-text">Pemasukan</div>
                </button>
            </div>
        </header>

        <!-- Content -->
        <main class="content">
            <!-- Dashboard Page -->
            <div class="page active" id="dashboard">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Transaksi Terbaru</div>
                        <div class="card-value" style="cursor: pointer; color: #32E612;" onclick="showPage('history')">Lihat Semua</div>
                    </div>
                    <div class="transaction-list" id="recentTransactionsList"></div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Grafik Keuangan</div>
                        <div class="card-value" id="chartPeriodText" style="cursor: pointer; color: #32E612;" onclick="showChartDetail()">7 Hari Terakhir</div>
                    </div>
                    <div class="chart-container">
                        <div id="mainChart" class="main-chart-container"></div>
                        <div id="chartTooltip" class="chart-tooltip"></div>
                    </div>
                </div>
            </div>

            <!-- Add Transaction Page -->
            <div class="page" id="add">
                <div class="card">
                    <div class="card-body">
                        <form id="transactionForm">
                            <!-- Transaction Type Selector -->
                            <div class="form-group">
                                <label class="form-label">Jenis Transaksi</label>
                                <div class="type-selector">
                                    <div class="type-option" data-type="income">
                                        <div class="type-option-icon">
                                            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                                                <path d="M7,10L12,15L17,10H7Z"/>
                                            </svg>
                                        </div>
                                        <div class="type-option-text">Pemasukan</div>
                                    </div>
                                    <div class="type-option" data-type="expense">
                                        <div class="type-option-icon">
                                            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                                                <path d="M17,14L12,9L7,14H17Z"/>
                                            </svg>
                                        </div>
                                        <div class="type-option-text">Pengeluaran</div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group hidden" id="categoryGroup">
                                <label class="form-label">Kategori</label>
                                <select class="form-select" id="category" required>
                                    <option value="">Pilih Kategori</option>
                                </select>
                            </div>

                            <div class="form-group hidden" id="amountGroup">
                                <label class="form-label">Jumlah (Rp)</label>
                                <input type="text" class="form-input currency-input" id="amount" placeholder="Masukkan jumlah" required>
                                <input type="hidden" id="amountValue">
                            </div>

                            <div class="form-group hidden" id="dateGroup">
                                <label class="form-label">Tanggal</label>
                                <input type="date" class="form-input" id="date" required>
                            </div>

                            <div class="form-group hidden" id="descriptionGroup">
                                <label class="form-label">Keterangan</label>
                                <input type="text" class="form-input" id="description" placeholder="Catatan">
                            </div>

                            <div class="form-group hidden" id="imageGroup">
                                <label class="form-label">Upload Gambar (Opsional)</label>
                                <div class="image-upload" onclick="document.getElementById('imageInput').click()">
                                    <input type="file" id="imageInput" accept="image/*" onchange="handleImageUpload(event)">
                                    <div class="upload-icon">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="#32E612">
                                            <path d="M4,4H7L9,2H15L17,4H20A2,2 0 0,1 22,6V18A2,2 0 0,1 20,20H4A2,2 0 0,1 2,18V6A2,2 0 0,1 4,4M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9Z"/>
                                        </svg>
                                    </div>
                                    <div class="upload-text">Klik untuk upload gambar</div>
                                    <div class="upload-hint">Otomatis dikompres - JPG, PNG, GIF</div>
                                </div>
                                <div id="imagePreview"></div>
                            </div>

                            <button type="submit" class="btn" id="submitBtn" disabled>
                                Simpan Transaksi
                            </button>
                        </form>
                    </div>
                </div>
            </div>

            <!-- History Page -->
            <div class="page" id="history">
                <div class="filters">
                    <div class="filters-header">
                        <div class="card-title">Semua Transaksi</div>
                    </div>
                    <div class="filter-row">
                        <div class="form-group">
                            <select class="form-select" id="typeFilter">
                                <option value="">Semua Jenis</option>
                                <option value="income">Pemasukan</option>
                                <option value="expense">Pengeluaran</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <select class="form-select" id="categoryFilter">
                                <option value="">Kategori</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <select class="period-selector" id="historyPeriodFilter">
                                <option value="today">Hari Ini</option>
                                <option value="week">Minggu Ini</option>
                                <option value="month" selected>Bulan Ini</option>
                                <option value="month3">3 Bulan</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="transaction-list" id="transactionsList"></div>
                </div>
            </div>

            <!-- Reports Page -->
            <div class="page" id="reports">
                <div class="filters">
                    <div class="reports-header">
                        <div class="card-title">Laporan Keuangan</div>
                        <div class="export-actions">
                            <button class="export-btn" onclick="exportData()">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                                </svg>
                                Export
                            </button>
                            <button class="export-btn danger" onclick="clearAllData()">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"/>
                                </svg>
                                Hapus
                            </button>
                        </div>
                    </div>
                    <div class="filter-row" style="grid-template-columns: 1fr;">
                        <div class="form-group">
                            <select class="form-select" id="reportsPeriodFilter" style="width: 100%; text-align: left; padding: 12px 16px;">
                                <option value="month">Bulan Ini</option>
                                <option value="month1">1 Bulan Lalu</option>
                                <option value="month2">2 Bulan Lalu</option>
                                <option value="month3">3 Bulan Lalu</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Financial Overview Chart -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Ringkasan Keuangan</div>
                    </div>
                    <div class="reports-chart-container">
                        <div class="modern-pie-section">
                            <div class="pie-chart-circle" id="pieChart">
                                <div class="pie-chart-center">
                                    <div style="font-size: 9px; font-weight: 500; color: #8E8E93;">Saldo</div>
                                    <div id="balanceInPie" class="pie-chart-balance">Rp 0</div>
                                </div>
                            </div>
                            <div class="pie-chart-legends">
                                <div class="pie-legend">
                                    <div class="pie-legend-color income"></div>
                                    <div class="pie-legend-value" id="incomeInPie">Rp 0</div>
                                </div>
                                <div class="pie-legend">
                                    <div class="pie-legend-color expense"></div>
                                    <div class="pie-legend-value" id="expenseInPie">Rp 0</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Category Breakdown -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Kategori Pengeluaran</div>
                    </div>
                    <div class="card-body">
                        <div id="categoryBreakdown" class="category-breakdown">
                            <!-- Category items will be generated here -->
                        </div>
                    </div>
                </div>

                <!-- Period Summary -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Detail Periode</div>
                    </div>
                    <div class="card-body" id="periodSummary">
                        <!-- Period summary will be generated here -->
                    </div>
                </div>
            </div>

            <!-- Savings Page -->
            <div class="page" id="savings">
                <div class="card" id="savingsFormCard" style="display: none;">
                    <div class="card-header">
                        <div class="card-title">Tambah Target Tabungan</div>
                        <div class="card-value" style="cursor: pointer; color: #32E612;" onclick="hideSavingsForm()">Batal</div>
                    </div>
                    <div class="card-body">
                        <form id="savingsForm">
                            <div class="form-group">
                                <label class="form-label">Nama Target</label>
                                <input type="text" class="form-input" id="savingsGoal" placeholder="Contoh: Beli Mobil" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Target Jumlah (Rp)</label>
                                <input type="text" class="form-input currency-input" id="savingsTarget" placeholder="Masukkan target jumlah" required>
                                <input type="hidden" id="savingsTargetValue">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Jumlah Awal (Rp)</label>
                                <input type="text" class="form-input currency-input" id="savingsInitial" placeholder="Masukkan jumlah awal (opsional)">
                                <input type="hidden" id="savingsInitialValue">
                            </div>
                            <button type="submit" class="btn" id="savingsSubmitBtn" disabled>
                                Buat Target Tabungan
                            </button>
                        </form>
                    </div>
                </div>

                <!-- Savings Action Buttons - Horizontal Layout -->
                <div class="savings-actions">
                    <div class="savings-btn-container" onclick="showSavingsGoalsList()" id="savingsListBtn">
                        <div class="savings-btn">
                            <div class="savings-btn-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M9,5V9H21V5M9,19H21V15H9M9,14H21V10H9M4,9H8L6,7M4,19H8L6,17M4,14H8L6,12"/>
                                </svg>
                            </div>
                            <div class="savings-btn-text">Lihat Target</div>
                        </div>
                    </div>
                    
                    <div class="savings-btn-container" onclick="showSavingsForm()" id="savingsAddButton">
                        <div class="savings-btn">
                            <div class="savings-btn-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M17,13H13V17H11V13H7V11H11V7H13V11H17M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"/>
                                </svg>
                            </div>
                            <div class="savings-btn-text">Tambah Target</div>
                        </div>
                    </div>
                </div>

                <div id="savingsGoalsList" style="display: none;">
                    <!-- Savings goals will be rendered here -->
                </div>
            </div>
        </main>

        <!-- Bottom Navigation - Fixed and Enhanced for PWA -->
        <nav class="bottom-nav">
            <button class="nav-btn active" onclick="showPage('dashboard')" data-page="dashboard">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/>
                </svg>
                <div class="nav-text">Beranda</div>
            </button>
            <button class="nav-btn" onclick="showPage('add')" data-page="add">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                </svg>
                <div class="nav-text">Tambah</div>
            </button>
            <button class="nav-btn savings-btn" onclick="showPage('savings')" data-page="savings">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M11.5,1L2,6V8H21V6M16,10V17H19V19H3V17H6V10H16M8,10V17H14V10H8Z"/>
                </svg>
                <div class="nav-text">Tabungan</div>
            </button>
            <button class="nav-btn" onclick="showPage('history')" data-page="history">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"/>
                </svg>
                <div class="nav-text">Riwayat</div>
            </button>
            <button class="nav-btn" onclick="showPage('reports')" data-page="reports">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4zm2.5 2.25h-15V5.75h15v13.5zm0-15.5h-15c-1.1 0-2 .9-2 2v13.5c0 1.1.9 2 2 2h15c1.1 0 2-.9 2-2V5.75c0-1.1-.9-2-2-2z"/>
                </svg>
                <div class="nav-text">Laporan</div>
            </button>
        </nav>

        <!-- Transaction Detail Modal -->
        <div class="modal" id="transactionDetailModal">
            <div class="modal-content">
                <div class="modal-header">Detail Transaksi</div>
                <div class="preview-content">
                    <div class="preview-item">
                        <div class="preview-label">Jenis</div>
                        <div class="preview-value" id="detailType"></div>
                    </div>
                    <div class="preview-item">
                        <div class="preview-label">Kategori</div>
                        <div class="preview-value" id="detailCategory"></div>
                    </div>
                    <div class="preview-item">
                        <div class="preview-label">Jumlah</div>
                        <div class="preview-value" id="detailAmount"></div>
                    </div>
                    <div class="preview-item">
                        <div class="preview-label">Tanggal</div>
                        <div class="preview-value" id="detailDate"></div>
                    </div>
                    <div class="preview-item">
                        <div class="preview-label">Keterangan</div>
                        <div class="preview-value" id="detailDescription"></div>
                    </div>
                    <div id="detailImageContainer" style="display: none;">
                        <div class="preview-label">Gambar</div>
                        <img id="detailImage" style="max-width: 100%; border-radius: 8px; margin-top: 8px;">
                    </div>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeTransactionDetailModal()">Tutup</button>
                    <button type="button" class="btn btn-small" onclick="editTransactionFromDetail()" style="background: #FF9F0A; color: #000;">Edit</button>
                </div>
            </div>
        </div>

        <!-- Edit Modal -->
        <div class="modal" id="editModal">
            <div class="modal-content">
                <div class="modal-header">Edit Transaksi</div>
                <form id="editForm">
                    <div class="form-group">
                        <label class="form-label">Jenis</label>
                        <select class="form-select" id="editType" required>
                            <option value="income">Pemasukan</option>
                            <option value="expense">Pengeluaran</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Kategori</label>
                        <select class="form-select" id="editCategory" required></select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Jumlah (Rp)</label>
                        <input type="text" class="form-input currency-input" id="editAmount" required>
                        <input type="hidden" id="editAmountValue">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Tanggal</label>
                        <input type="date" class="form-input" id="editDate" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Keterangan</label>
                        <input type="text" class="form-input" id="editDescription">
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" onclick="closeEditModal()">Batal</button>
                        <button type="submit" class="btn" id="editSubmitBtn">Update</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Chart Detail Modal -->
        <div class="modal chart-detail-modal" id="chartModal">
            <div class="modal-content">
                <div class="modal-header">Detail Grafik Keuangan</div>
                <div class="detail-stats" style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 20px;">
                    <div class="detail-stat income" style="text-align: center; padding: 16px; background: #2A2A2A; border-radius: 12px;">
                        <div class="detail-stat-value" id="detailIncome" style="font-size: 20px; font-weight: 700; margin-bottom: 4px; color: #32E612;">Rp 0</div>
                        <div class="detail-stat-label" style="font-size: 12px; color: #8E8E93;">Total Pemasukan</div>
                    </div>
                    <div class="detail-stat expense" style="text-align: center; padding: 16px; background: #2A2A2A; border-radius: 12px;">
                        <div class="detail-stat-value" id="detailExpense" style="font-size: 20px; font-weight: 700; margin-bottom: 4px; color: #FF453A;">Rp 0</div>
                        <div class="detail-stat-label" style="font-size: 12px; color: #8E8E93;">Total Pengeluaran</div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Pilih Periode</label>
                    <select class="form-select" id="chartPeriodFilter">
                        <option value="week">7 Hari Terakhir</option>
                        <option value="month">30 Hari Terakhir</option>
                        <option value="year">12 Bulan Terakhir</option>
                    </select>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeChartModal()">Tutup</button>
                </div>
            </div>
        </div>

        <!-- Add Savings Modal -->
        <div class="modal" id="addSavingsModal">
            <div class="modal-content">
                <div class="modal-header">Tambah Tabungan</div>
                <div class="preview-content">
                    <div class="preview-item">
                        <div class="preview-label">Target</div>
                        <div class="preview-value" id="savingsModalTarget"></div>
                    </div>
                    <div class="preview-item">
                        <div class="preview-label">Saldo Saat Ini</div>
                        <div class="preview-value" id="savingsModalCurrent"></div>
                    </div>
                    <div class="preview-item">
                        <div class="preview-label">Sisa Target</div>
                        <div class="preview-value" id="savingsModalRemaining"></div>
                    </div>
                </div>
                <form id="addSavingsForm">
                    <div class="form-group">
                        <label class="form-label">Jumlah Tabungan (Rp)</label>
                        <input type="text" class="form-input currency-input" id="savingsAddAmount" placeholder="Masukkan jumlah tabungan" required>
                        <input type="hidden" id="savingsAddAmountValue">
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" onclick="closeAddSavingsModal()">Batal</button>
                        <button type="submit" class="btn" id="addSavingsSubmitBtn" disabled>Tambah Tabungan</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Scripts - Load Firebase config first -->
    <script src="firebase.js"></script>
    <script src="script.js"></script>
</body>
</html>